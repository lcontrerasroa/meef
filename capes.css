/* ================================
   CAPES — thème typographique (final)
   - Titres H1/H2/H3 ++
   - Tables lisibles, une par ligne
   - IPA/ruby confort
   - Mode sombre auto
   ================================ */

/* ---- Variables ---- */
:root{
  --bg: #fffdfc;
  --text: #1f2937;
  --muted: #6b7280;
  --brand-1: #ff735c;     /* rubans H1/H2 */
  --brand-2: #1f9d8f;     /* liens/accents */
  --note: #fff7e6;        /* encarts */
  --note-border: #f0b429;
  --kbd-bg: #f6f6f6;
  --kbd-br: #e5e7eb;
  --table-br: #e5e7eb;
  --table-head: #f8fafc;
  --code: #374151;
  --shadow: 0 6px 20px rgba(31,41,55,.06);
}

/* ---- Reset léger ---- */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
img,svg{max-width:100%;height:auto}

/* ---- Base ---- */
body{
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background:var(--bg);
  line-height:1.6;
  max-width: 900px;
  margin: 2rem auto;
  padding: 0 1rem 4rem;
}

/* ---- Liens ---- */
a{color:var(--brand-2);text-decoration:none}
a:hover{text-decoration:underline}

/* ---- Hiérarchie titres (agrandie) ---- */
h1,h2,h3,h4{line-height:1.2;margin:1.25rem 0 .75rem}
h1{
  font-size: clamp(2.2rem, 3.4vw + 1rem, 3rem);
  color:#fff;
  background:var(--brand-1);
  padding:.7rem 1rem;
  border-radius:.9rem;
  box-shadow: var(--shadow);
  display:inline-block;
}
h2{
  font-size: clamp(1.6rem, 2.2vw + .9rem, 2.1rem);
  color:#fff;
  background: color-mix(in srgb, var(--brand-1) 92%, white);
  padding:.55rem .85rem;
  border-radius:.75rem;
  display:inline-block;
  box-shadow: var(--shadow);
  margin-top:2rem;
}
h3{
  font-size: clamp(1.25rem, 1.2vw + .9rem, 1.5rem);
  color:#111827;
  margin-top:1.2rem;
}
h4{ font-size:1.1rem; color:#111827; }
header p em{color:var(--muted)}

/* ---- Paragraphes & listes ---- */
p{margin:.75rem 0}
ul,ol{margin:.5rem 0 .75rem 1.25rem}
ul.compact>li{margin:.25rem 0}
li+li{margin-top:.2rem}

/* ---- Encarts / notes ---- */
.note{
  background:var(--note);
  border-left:5px solid var(--note-border);
  padding:.9rem 1rem;
  border-radius:.5rem;
  margin:1rem 0;
}

/* ---- Code inline type “k” ---- */
code.k{
  background:var(--kbd-bg);
  border:1px solid var(--kbd-br);
  color:var(--code);
  border-radius:.35rem;
  padding:.05rem .35rem;
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  font-size:.95em;
}

/* ---- IPA / ruby ---- */
.ipa{font-variant-ligatures:none}
ruby{ruby-position: over;}
rt{
  font-size:.8em;            /* plus confortable */
  color:var(--muted);
  letter-spacing:.2px;
}

/* =========================
   TABLES — UNE PAR LIGNE
   ========================= */

/* (A) Comportement par défaut : largeur pleine, jamais côte à côte */
table{
  display: table;            /* rétablit le flux natif */
  width: 100% !important;
  max-width: 100% !important;
  margin: 1rem 0;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 1rem;           /* ↑ police de table */
  border: 1px solid var(--table-br);
  border-radius: .6rem;
  box-shadow: var(--shadow);
  background: #fff;
  /* si le parent est flex/grid, on force la table à prendre toute la rangée */
  flex: 0 0 100%;
  grid-column: 1 / -1;
}
th,td{
  padding:.7rem .8rem;
  border-bottom:1px solid var(--table-br);
  vertical-align:top;
  white-space:nowrap;         /* évite la casse moche des IPA/digrammes */
}
th{
  background:var(--table-head);
  text-align:left;
  font-weight:700;
}
tr:last-child td{border-bottom:none}

/* (B) Support optionnel d'un wrapper .table-wrap pour le scroll horizontal “propre” */
.table-wrap{
  display:block;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  margin:1rem 0;
}
.table-wrap > table{ width:100%; }

/* (C) Tables dans une grille: 1 colonne sur toute la largeur */
[class*="grid"] table{ grid-column: 1 / -1; }

/* (D) Confort mobile : marges latérales douces quand wrapper présent */
@media (max-width: 720px){
  .table-wrap{ margin: .9rem -1rem; padding: 0 1rem; }
}

/* ---- Encadré d’exemple (optionnel) ---- */
.ex{
  background:#f9fafb;
  border:1px dashed var(--table-br);
  border-radius:.5rem;
  padding:.6rem .8rem;
}

/* ---- Petite barre avant h2 (optionnel) ---- */
section>h2::before{
  content:"";
  display:inline-block;
  width:.4rem;height:1.1rem;
  background:var(--brand-2);
  border-radius:.4rem;
  margin-right:.5rem;
  vertical-align:middle;
}

/* ---- Séparateur ---- */
hr{border:none;height:1px;background:#eee;margin:1.25rem 0}

/* ---- Mode sombre (auto) ---- */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1115; --text:#e5e7eb; --muted:#9aa3b2;
    --brand-1:#ff816c; --brand-2:#3fd0c2;
    --note:#191e24; --note-border:#c6931a;
    --kbd-bg:#151922; --kbd-br:#2a3240;
    --table-br:#283244; --table-head:#111826; --code:#e5e7eb;
    --shadow: 0 6px 22px rgba(0,0,0,.35);
  }
  a:hover{text-decoration:none;border-bottom:1px dotted currentColor}
  table{background:#0d1117}
  tbody tr:nth-child(odd){background:#0b0f14}
  .ex{background:#10151b;border-color:#223047}
    }
